---
- name: Registering system with Red Hat
  hosts: all
  become: yes
  gather_facts: yes
  vars:
    username: "{{ username }}"
    password: "{{ password }}"
    pool_id: "{{ pool_id }}"
    
  tasks:
  
  - name: Register and subscribe the system 
    redhat_subscription:
      username: "{{ username }}"
      password: "{{ password }}"
      pool_ids: "{{ pool_id }}"
      state: present
    
